{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/js/app.js","app/js/modules/scroll-hover.js"],"names":[],"mappings":"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","file":"../app.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import ScrollHover from './modules/scroll-hover';\r\n\r\n// =============== Применение ===============\r\n\r\n// wrap - класс элемента с overflow, внутри которого рсположен контент, который нужно скроллить по ховеру\r\n// content - класс элемента контента, его будем двигать\r\n// pxPreSec - количество пикселей, которые будут скроллиться за 1 секунду\r\n\r\nnew ScrollHover({\r\n    wrap: '.wrap',\r\n    content: '.content',\r\n    pxPreSec: 100\r\n});","(function(root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define([], factory);\r\n    } else if (typeof exports === 'object') {\r\n        // Node. Does not work with strict CommonJS, but\r\n        // only CommonJS-like environments that support module.exports,\r\n        // like Node.\r\n        module.exports = factory();\r\n        if (typeof window === 'object') {\r\n            window.ScrollHover = factory();\r\n        }\r\n    } else {\r\n        // Browser globals (root is window)\r\n        root.ScrollHover = factory();\r\n    }\r\n}(this, function() {\r\n    return class ScrollHover {\r\n        constructor(params) {\r\n            this.wrap = params.wrap;\r\n            this.content = params.content;\r\n            this.pxPreSec = params.pxPreSec || 100;\r\n            this.scope_attr = 'scrollhoverscope';\r\n\r\n            this.init();\r\n        }\r\n\r\n        // Служебный метод, нужен для генерации scopedID\r\n        rand(min, max) {\r\n            let rand = Math.floor(min + Math.random() * (max + 1 - min));\r\n            return rand;\r\n        }\r\n\r\n        // Служебный метод, генерирующий атрибут для изоляции стилей\r\n        scopedIdGenerate() {\r\n            let id = '';\r\n            for (let i = 0; i < 10; i++) {\r\n                id += String.fromCharCode(this.rand(97, 122));\r\n            }\r\n\r\n            return id;\r\n        }\r\n\r\n        // Метод, шаблонизирующий стили для скролла по ховеру. \r\n        // Подставляет значения, которые нужны для равномерной скорости скролла различного\r\n        // объема контента в контейнерах различной высоты\r\n        getStyleTemplate(scope, duration, translate_y) {\r\n            return `\r\n            ${this.wrap}[data-${this.scope_attr}=${scope}] .content {\r\n                transition: transform ${duration}ms linear;\r\n                will-change: transform;\r\n            }\r\n    \r\n            ${this.wrap}[data-${this.scope_attr}=${scope}]:hover .content {\r\n                transform: translate3d(0, ${translate_y}px, 1px);\r\n            }`;\r\n        }\r\n\r\n        // Метод, создающий элемент стилей внутри контейнера.\r\n        // Выполняет все расчеты для обеспечения нужной скорости скролла\r\n        makeStyle(wrap, content) {\r\n            // Генерируем атрибут изоляции стилей\r\n            let scope = this.scopedIdGenerate();\r\n            wrap.dataset[this.scope_attr] = scope;\r\n\r\n            // Получаем высоту контента\r\n            let content_height = parseInt(getComputedStyle(content).height);\r\n\r\n            // Получаем высоту контейнера и на ее основе получаем \r\n            // максимальное значение сдвига контента\r\n            let wrap_height = parseInt(getComputedStyle(wrap).height);\r\n            let translate_y = wrap_height - content_height;\r\n            // Если высота контента меньше высоты контейнера, то ничего двигать не надо\r\n            translate_y = (translate_y < 0) ? translate_y : 0;\r\n\r\n            // Зная величину сдвига, получаем длительность transition,\r\n            // чтобы обеспечить стабильную скорость скролла\r\n            let duration = (Math.abs(translate_y) / this.pxPreSec) * 1000;\r\n\r\n            // Из полученных данных генерируем индивидуальные стили\r\n            let style = document.createElement('style');\r\n            style.textContent = this.getStyleTemplate(scope, duration, translate_y);\r\n\r\n            // И добавляем их в свой контейнер\r\n            wrap.appendChild(style);\r\n        }\r\n\r\n        init() {\r\n            // На документ вешаем обработчик на событие захода мыши на элемент\r\n            document.addEventListener('mouseover', e => {\r\n                // Если мышь попала на блок контента\r\n                if (e.target.classList.contains(this.wrap.substring(1))) {\r\n                    let wrap = e.target;\r\n                    let content = wrap.querySelector(this.content);\r\n\r\n                    // И если в контейнере этого контента еще нет стилей для его скролла\r\n                    if (!wrap.querySelector('style')) {\r\n                        // То запустим создание этих стилей\r\n                        this.makeStyle(wrap, content);\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n}))"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvanMvYXBwLmpzIiwiYXBwL2pzL21vZHVsZXMvc2Nyb2xsLWhvdmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUEsSUFBSSxvQkFBSixDQUFnQjtBQUNaLEVBQUEsSUFBSSxFQUFFLE9BRE07QUFFWixFQUFBLE9BQU8sRUFBRSxVQUZHO0FBR1osRUFBQSxRQUFRLEVBQUU7QUFIRSxDQUFoQjs7Ozs7Ozs7Ozs7OztBQ1JDLFdBQVMsSUFBVCxFQUFlLE9BQWYsRUFBd0I7QUFDckIsTUFBSSxPQUFPLE1BQVAsS0FBa0IsVUFBbEIsSUFBZ0MsTUFBTSxDQUFDLEdBQTNDLEVBQWdEO0FBQzVDO0FBQ0EsSUFBQSxNQUFNLENBQUMsRUFBRCxFQUFLLE9BQUwsQ0FBTjtBQUNILEdBSEQsTUFHTyxJQUFJLFFBQU8sT0FBUCx5Q0FBTyxPQUFQLE9BQW1CLFFBQXZCLEVBQWlDO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLElBQUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsT0FBTyxFQUF4Qjs7QUFDQSxRQUFJLFFBQU8sTUFBUCx5Q0FBTyxNQUFQLE9BQWtCLFFBQXRCLEVBQWdDO0FBQzVCLE1BQUEsTUFBTSxDQUFDLFdBQVAsR0FBcUIsT0FBTyxFQUE1QjtBQUNIO0FBQ0osR0FSTSxNQVFBO0FBQ0g7QUFDQSxJQUFBLElBQUksQ0FBQyxXQUFMLEdBQW1CLE9BQU8sRUFBMUI7QUFDSDtBQUNKLENBaEJBLFVBZ0JPLFlBQVc7QUFDZjtBQUFBO0FBQUE7QUFDSSwyQkFBWSxNQUFaLEVBQW9CO0FBQUE7O0FBQ2hCLGFBQUssSUFBTCxHQUFZLE1BQU0sQ0FBQyxJQUFuQjtBQUNBLGFBQUssT0FBTCxHQUFlLE1BQU0sQ0FBQyxPQUF0QjtBQUNBLGFBQUssUUFBTCxHQUFnQixNQUFNLENBQUMsUUFBUCxJQUFtQixHQUFuQztBQUNBLGFB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LEVBQWtDO0FBQzlCO0FBQ0EsZ0JBQUEsS0FBSSxDQUFDLFNBQUwsQ0FBZSxJQUFmLEVBQXFCLE9BQXJCO0FBQ0g7QUFDSjtBQUNKLFdBWkQ7QUFhSDtBQXJGTDs7QUFBQTtBQUFBO0FBQUE7QUF5RkgsQ0ExR0EsQ0FBRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBTY3JvbGxIb3ZlciBmcm9tICcuL21vZHVsZXMvc2Nyb2xsLWhvdmVyJztcclxuXHJcbi8vID09PT09PT09PT09PT09PSDQn9GA0LjQvNC10L3QtdC90LjQtSA9PT09PT09PT09PT09PT1cclxuXHJcbi8vIHdyYXAgLSDQutC70LDRgdGBINGN0LvQtdC80LXQvdGC0LAg0YEgb3ZlcmZsb3csINCy0L3Rg9GC0YDQuCDQutC+0YLQvtGA0L7Qs9C+INGA0YHQv9C+0LvQvtC20LXQvSDQutC+0L3RgtC10L3Rgiwg0LrQvtGC0L7RgNGL0Lkg0L3Rg9C20L3QviDRgdC60YDQvtC70LvQuNGC0Ywg0L/QviDRhdC+0LLQtdGA0YNcclxuLy8gY29udGVudCAtINC60LvQsNGB0YEg0Y3Qu9C10LzQtdC90YLQsCDQutC+0L3RgtC10L3RgtCwLCDQtdCz0L4g0LHRg9C00LXQvCDQtNCy0LjQs9Cw0YLRjFxyXG4vLyBweFByZVNlYyAtINC60L7Qu9C40YfQtdGB0YLQstC+INC/0LjQutGB0LXQu9C10LksINC60L7RgtC+0YDRi9C1INCx0YPQtNGD0YIg0YHQutGA0L7Qu9C70LjRgtGM0YHRjyDQt9CwIDEg0YHQtdC60YPQvdC00YNcclxuXHJcbm5ldyBTY3JvbGxIb3Zlcih7XHJcbiAgICB3cmFwOiAnLndyYXAnLFxyXG4gICAgY29udGVudDogJy5jb250ZW50JyxcclxuICAgIHB4UHJlU2VjOiAxMDBcclxufSk7IiwiKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XHJcbiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXHJcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICB3aW5kb3cuU2Nyb2xsSG92ZXIgPSBmYWN0b3J5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxyXG4gICAgICAgIHJvb3QuU2Nyb2xsSG92ZXIgPSBmYWN0b3J5KCk7XHJcbiAgICB9XHJcbn0odGhpcywgZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gY2xhc3MgU2Nyb2xsSG92ZXIge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgICAgICB0aGlzLndyYXAgPSBwYXJhbXMud3JhcDtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gcGFyYW1zLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgIHRoaXMucHhQcmVTZWMgPSBwYXJhbXMucHhQcmVTZWMgfHwgMTAwO1xyXG4gICAgICAgICAgICB0aGlzLnNjb3BlX2F0dHIgPSAnc2Nyb2xsaG92ZXJzY29wZSc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vINCh0LvRg9C20LXQsdC90YvQuSDQvNC10YLQvtC0LCDQvdGD0LbQtdC9INC00LvRjyDQs9C10L3QtdGA0LDRhtC40Lggc2NvcGVkSURcclxuICAgICAgICByYW5kKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgICAgIGxldCByYW5kID0gTWF0aC5mbG9vcihtaW4gKyBNYXRoLnJhbmRvbSgpICogKG1heCArIDEgLSBtaW4pKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJhbmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQodC70YPQttC10LHQvdGL0Lkg0LzQtdGC0L7QtCwg0LPQtdC90LXRgNC40YDRg9GO0YnQuNC5INCw0YLRgNC40LHRg9GCINC00LvRjyDQuNC30L7Qu9GP0YbQuNC4INGB0YLQuNC70LXQuVxyXG4gICAgICAgIHNjb3BlZElkR2VuZXJhdGUoKSB7XHJcbiAgICAgICAgICAgIGxldCBpZCA9ICcnO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5yYW5kKDk3LCAxMjIpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g0JzQtdGC0L7QtCwg0YjQsNCx0LvQvtC90LjQt9C40YDRg9GO0YnQuNC5INGB0YLQuNC70Lgg0LTQu9GPINGB0LrRgNC+0LvQu9CwINC/0L4g0YXQvtCy0LXRgNGDLiBcclxuICAgICAgICAvLyDQn9C+0LTRgdGC0LDQstC70Y/QtdGCINC30L3QsNGH0LXQvdC40Y8sINC60L7RgtC+0YDRi9C1INC90YPQttC90Ysg0LTQu9GPINGA0LDQstC90L7QvNC10YDQvdC+0Lkg0YHQutC+0YDQvtGB0YLQuCDRgdC60YDQvtC70LvQsCDRgNCw0LfQu9C40YfQvdC+0LPQvlxyXG4gICAgICAgIC8vINC+0LHRitC10LzQsCDQutC+0L3RgtC10L3RgtCwINCyINC60L7QvdGC0LXQudC90LXRgNCw0YUg0YDQsNC30LvQuNGH0L3QvtC5INCy0YvRgdC+0YLRi1xyXG4gICAgICAgIGdldFN0eWxlVGVtcGxhdGUoc2NvcGUsIGR1cmF0aW9uLCB0cmFuc2xhdGVfeSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICAke3RoaXMud3JhcH1bZGF0YS0ke3RoaXMuc2NvcGVfYXR0cn09JHtzY29wZX1dIC5jb250ZW50IHtcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAke2R1cmF0aW9ufW1zIGxpbmVhcjtcclxuICAgICAgICAgICAgICAgIHdpbGwtY2hhbmdlOiB0cmFuc2Zvcm07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAke3RoaXMud3JhcH1bZGF0YS0ke3RoaXMuc2NvcGVfYXR0cn09JHtzY29wZX1dOmhvdmVyIC5jb250ZW50IHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgJHt0cmFuc2xhdGVfeX1weCwgMXB4KTtcclxuICAgICAgICAgICAgfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQnNC10YLQvtC0LCDRgdC+0LfQtNCw0Y7RidC40Lkg0Y3Qu9C10LzQtdC90YIg0YHRgtC40LvQtdC5INCy0L3Rg9GC0YDQuCDQutC+0L3RgtC10LnQvdC10YDQsC5cclxuICAgICAgICAvLyDQktGL0L/QvtC70L3Rj9C10YIg0LLRgdC1INGA0LDRgdGH0LXRgtGLINC00LvRjyDQvtCx0LXRgdC/0LXRh9C10L3QuNGPINC90YPQttC90L7QuSDRgdC60L7RgNC+0YHRgtC4INGB0LrRgNC+0LvQu9CwXHJcbiAgICAgICAgbWFrZVN0eWxlKHdyYXAsIGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgLy8g0JPQtdC90LXRgNC40YDRg9C10Lwg0LDRgtGA0LjQsdGD0YIg0LjQt9C+0LvRj9GG0LjQuCDRgdGC0LjQu9C10LlcclxuICAgICAgICAgICAgbGV0IHNjb3BlID0gdGhpcy5zY29wZWRJZEdlbmVyYXRlKCk7XHJcbiAgICAgICAgICAgIHdyYXAuZGF0YXNldFt0aGlzLnNjb3BlX2F0dHJdID0gc2NvcGU7XHJcblxyXG4gICAgICAgICAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INCy0YvRgdC+0YLRgyDQutC+0L3RgtC10L3RgtCwXHJcbiAgICAgICAgICAgIGxldCBjb250ZW50X2hlaWdodCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoY29udGVudCkuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LLRi9GB0L7RgtGDINC60L7QvdGC0LXQudC90LXRgNCwINC4INC90LAg0LXQtSDQvtGB0L3QvtCy0LUg0L/QvtC70YPRh9Cw0LXQvCBcclxuICAgICAgICAgICAgLy8g0LzQsNC60YHQuNC80LDQu9GM0L3QvtC1INC30L3QsNGH0LXQvdC40LUg0YHQtNCy0LjQs9CwINC60L7QvdGC0LXQvdGC0LBcclxuICAgICAgICAgICAgbGV0IHdyYXBfaGVpZ2h0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh3cmFwKS5oZWlnaHQpO1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNsYXRlX3kgPSB3cmFwX2hlaWdodCAtIGNvbnRlbnRfaGVpZ2h0O1xyXG4gICAgICAgICAgICAvLyDQldGB0LvQuCDQstGL0YHQvtGC0LAg0LrQvtC90YLQtdC90YLQsCDQvNC10L3RjNGI0LUg0LLRi9GB0L7RgtGLINC60L7QvdGC0LXQudC90LXRgNCwLCDRgtC+INC90LjRh9C10LPQviDQtNCy0LjQs9Cw0YLRjCDQvdC1INC90LDQtNC+XHJcbiAgICAgICAgICAgIHRyYW5zbGF0ZV95ID0gKHRyYW5zbGF0ZV95IDwgMCkgPyB0cmFuc2xhdGVfeSA6IDA7XHJcblxyXG4gICAgICAgICAgICAvLyDQl9C90LDRjyDQstC10LvQuNGH0LjQvdGDINGB0LTQstC40LPQsCwg0L/QvtC70YPRh9Cw0LXQvCDQtNC70LjRgtC10LvRjNC90L7RgdGC0YwgdHJhbnNpdGlvbixcclxuICAgICAgICAgICAgLy8g0YfRgtC+0LHRiyDQvtCx0LXRgdC/0LXRh9C40YLRjCDRgdGC0LDQsdC40LvRjNC90YPRjiDRgdC60L7RgNC+0YHRgtGMINGB0LrRgNC+0LvQu9CwXHJcbiAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IChNYXRoLmFicyh0cmFuc2xhdGVfeSkgLyB0aGlzLnB4UHJlU2VjKSAqIDEwMDA7XHJcblxyXG4gICAgICAgICAgICAvLyDQmNC3INC/0L7Qu9GD0YfQtdC90L3Ri9GFINC00LDQvdC90YvRhSDQs9C10L3QtdGA0LjRgNGD0LXQvCDQuNC90LTQuNCy0LjQtNGD0LDQu9GM0L3Ri9C1INGB0YLQuNC70LhcclxuICAgICAgICAgICAgbGV0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSB0aGlzLmdldFN0eWxlVGVtcGxhdGUoc2NvcGUsIGR1cmF0aW9uLCB0cmFuc2xhdGVfeSk7XHJcblxyXG4gICAgICAgICAgICAvLyDQmCDQtNC+0LHQsNCy0LvRj9C10Lwg0LjRhSDQsiDRgdCy0L7QuSDQutC+0L3RgtC10LnQvdC10YBcclxuICAgICAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChzdHlsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbml0KCkge1xyXG4gICAgICAgICAgICAvLyDQndCwINC00L7QutGD0LzQtdC90YIg0LLQtdGI0LDQtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC6INC90LAg0YHQvtCx0YvRgtC40LUg0LfQsNGF0L7QtNCwINC80YvRiNC4INC90LAg0Y3Qu9C10LzQtdC90YJcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyDQldGB0LvQuCDQvNGL0YjRjCDQv9C+0L/QsNC70LAg0L3QsCDQsdC70L7QuiDQutC+0L3RgtC10L3RgtCwXHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMud3JhcC5zdWJzdHJpbmcoMSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdyYXAgPSBlLnRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IHdyYXAucXVlcnlTZWxlY3Rvcih0aGlzLmNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDQmCDQtdGB0LvQuCDQsiDQutC+0L3RgtC10LnQvdC10YDQtSDRjdGC0L7Qs9C+INC60L7QvdGC0LXQvdGC0LAg0LXRidC1INC90LXRgiDRgdGC0LjQu9C10Lkg0LTQu9GPINC10LPQviDRgdC60YDQvtC70LvQsFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JhcC5xdWVyeVNlbGVjdG9yKCdzdHlsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINCi0L4g0LfQsNC/0YPRgdGC0LjQvCDRgdC+0LfQtNCw0L3QuNC1INGN0YLQuNGFINGB0YLQuNC70LXQuVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ha2VTdHlsZSh3cmFwLCBjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn0pKSJdfQ=="}